{{ define "main" }}
<!-- Cover ç•Œé¢ - å†…è”ç‰ˆæœ¬ -->
<style>
:root{
  --cover-blue:#2b6fff;
  --cover-cyan:#11cfe0;
  --cover-white:#ffffff;
  --cover-text:#111111;
  --cover-opacity: 0.96;
  --lines-alpha: 0.20;
}

html[data-theme="dark"], @media (prefers-color-scheme: dark){
  :root{
    --cover-text:#ffffff;
    --cover-opacity: 0.92;
  }
}

#site-cover{
  position:fixed; inset:0; z-index:9999;
  display:grid; place-items:center;
  overflow:hidden; background: transparent;
  animation: cover-enter 400ms ease-out both;
}

@keyframes cover-enter{
  from{ opacity:0; transform: scale(1.01); }
  to{ opacity:1; transform: scale(1); }
}

#site-cover .cover-bg{ position:absolute; inset:0; pointer-events:none; }

#site-cover .bg-gradient{
  position:absolute; inset:0;
  filter: blur(30px);
  background:
    radial-gradient(1200px 1200px at 10% 20%, rgba(43,111,255,0.45), transparent 60%),
    radial-gradient(900px 900px at 80% 30%, rgba(17,207,224,0.45), transparent 60%),
    radial-gradient(700px 700px at 50% 80%, rgba(255,255,255,0.50), transparent 60%),
    linear-gradient(135deg, rgba(255,255,255,var(--cover-opacity)), rgba(255,255,255,0.85));
  mix-blend-mode: plus-lighter;
  animation: floaty 14s ease-in-out infinite alternate;
}

html[data-theme="dark"] #site-cover .bg-gradient{
  background:
    radial-gradient(1200px 1200px at 10% 20%, rgba(43,111,255,0.35), transparent 60%),
    radial-gradient(900px 900px at 80% 30%, rgba(17,207,224,0.35), transparent 60%),
    radial-gradient(700px 700px at 50% 80%, rgba(255,255,255,0.10), transparent 60%),
    linear-gradient(135deg, rgba(10,12,16,var(--cover-opacity)), rgba(10,12,16,0.92));
  mix-blend-mode: normal;
}

@keyframes floaty{
  0%{ transform: translate3d(-2%, -1%, 0) scale(1.02); }
  100%{ transform: translate3d(2%, 1%, 0) scale(1.04); }
}

#site-cover .flow-lines{
  position:absolute; inset:-20% -40%;
  background:
    repeating-linear-gradient(115deg, rgba(255,255,255,var(--lines-alpha)) 0px, rgba(255,255,255,var(--lines-alpha)) 1px, transparent 1px, transparent 22px),
    repeating-linear-gradient(295deg, rgba(43,111,255,var(--lines-alpha)) 0px, rgba(43,111,255,var(--lines-alpha)) 1px, transparent 1px, transparent 24px),
    repeating-linear-gradient(180deg, rgba(17,207,224,var(--lines-alpha)) 0px, rgba(17,207,224,var(--lines-alpha)) 1px, transparent 1px, transparent 28px);
  opacity:.5; transform: translateZ(0);
  animation: lines-pan 24s linear infinite;
  mask-image: radial-gradient(120% 120% at 50% 50%, #000 60%, transparent 100%);
}

@keyframes lines-pan{
  0% { transform: translate(-5%, -5%) scale(1.02); }
  100% { transform: translate(5%, 5%) scale(1.06); }
}

#site-cover .cover-content{
  position:relative; z-index:2;
  max-width:min(90vw, 1200px);
  padding: 0 4vw;
  text-align:center;
  display:grid; place-items:center;
}

#site-cover .cover-lines{ display:grid; gap: clamp(8px, 1.6vw, 18px); }

#site-cover .line{
  color: var(--cover-text);
  font-weight: 700;
  letter-spacing: .2px;
  font-size: clamp(22px, 3.6vw, 48px);
  line-height: 1.15;
  opacity:0; transform: translateY(8px);
  animation: line-in 800ms cubic-bezier(.2,.8,.2,1) forwards;
  animation-delay: calc(var(--i) * 220ms + 250ms);
  text-shadow: 0 1px 0 rgba(255,255,255,.15);
}

@keyframes line-in{ to { opacity:1; transform: translateY(0); } }

#site-cover .hint{
  margin-top: clamp(10px, 2vw, 18px);
  font-size: clamp(12px, 1.4vw, 14px);
  color: var(--cover-text);
  opacity: .75;
}

#site-cover.hide{ pointer-events:none; animation: cover-exit 500ms ease-in forwards; }
@keyframes cover-exit{ to{ opacity:0; transform: scale(1.01); } }

#site-cover, .bg-gradient, .flow-lines { will-change: opacity, transform; }
</style>

<script>
(function(){
  function init() {
    console.log('ğŸ¯ Inline cover script started');
    
    {{ $lines := .Site.Params.cover.lines | default (slice "ä½ å¥½ï¼Œæˆ‘æ˜¯ Albert Mi" "æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººç½‘ç«™" "Science Â· Life Â· Peace") }}
    var lines = {{ $lines | jsonify }};
    
    var wrap = document.createElement('div');
    wrap.id = 'site-cover';
    wrap.innerHTML = [
      '<div class="cover-bg">',
      '  <div class="bg-gradient"></div>',
      '  <div class="flow-lines"></div>',
      '</div>',
      '<div class="cover-content">',
      '  <div class="cover-lines">',
      {{ range $i, $line := $lines }}
        '<div class="line" style="--i:{{ add $i 1 }};">{{ $line }}</div>',
      {{ end }}
      '    <div class="hint">( å•å‡»è¿›å…¥ / Tap to enter )</div>',
      '  </div>',
      '</div>'
    ].join('');
    
    var html = document.documentElement;
    var prevOverflow = html.style.overflow;
    html.style.overflow = 'hidden';
    
    document.body.appendChild(wrap);
    console.log('âœ… Cover added to page');
    
    function hide(){
      wrap.classList.add('hide');
      setTimeout(function(){
        try { document.body.removeChild(wrap); } catch(e){}
        html.style.overflow = prevOverflow || '';
      }, 700);
    }
    
    function onInteract(e){ 
      e.preventDefault && e.preventDefault(); 
      hide(); 
    }
    
    wrap.addEventListener('click', onInteract, { passive: false });
    wrap.addEventListener('touchstart', onInteract, { passive: false });
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<!-- åŸæœ‰çš„é¦–é¡µå†…å®¹ -->
{{ .Content }}
{{ end }}
